angular.module("JSFight",["ui.router"]).constant("API",{url:"http://localhost:3000/api/"}).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"/",templateUrl:"../views/home.html"}).state("login",{url:"/login",templateUrl:"../views/auth/login.html",controller:"AuthCtrl"}).state("signup",{url:"/signup",templateUrl:"../views/auth/signup.html",controller:"AuthCtrl"})}]),angular.module("JSFight").controller("AuthCtrl",["$scope","$state","$rootScope","Auth",function(a,b,c,d){a.login=function(){d.login(a.form.username,a.form.password).success(function(a){localStorage.setItem("user",JSON.stringify(a)),c.$broadcast("login",a),b.transitionTo("home")})},a.signup=function(){d.signup(a.form.username,a.form.password).success(function(a){localStorage.set("user",JSON.stringify(a)),c.$broadcast("login",a),b.transitionTo("home")})}}]),angular.module("JSFight").controller("HomeCtrl",["$scope","$state","$rootScope","Auth",function(a,b,c,d){c.$on("login",function(b){a.user=b}),c.$on("logout",function(){a.user=null}),a.logout=function(){d.logout().success(function(a){localStorage.removeItem("user"),c.$broadcast("logout"),b.transitionTo("home")})}}]);var player={name:"Mehdi",life:100,posX:0,posY:0,image:0};angular.module("JSFight").controller("initiateGameCtrl",function(){this.player1=player,player.name="Lucas",this.player2=player}),angular.module("JSFight").controller("actionGameCtrl",function(){}),angular.module("JSFight").controller("refreshGameCtrl",function(){}),angular.module("JSFight").factory("Auth",["$http","API",function(a,b){return{signup:function(c,d){return a.post(b.url+"auth/signup",{username:c,password:d})},login:function(c,d){return a.post(b.url+"auth/login",{username:c,password:d})},logout:function(){return a.get(b.url+"auth/logout")}}}]);